<Page x:Class="LaserControllerApp.WaveformPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:lvc="using:LiveChartsCore.SkiaSharpView.WinUI"
      xmlns:vm="using:LaserControllerApp.ViewModels"
      Loaded="Page_Loaded"
      Unloaded="Page_Unloaded">

    <Grid Margin="20">
        <StackPanel Spacing="15">
            <TextBlock Text="WAVEFORM DISPLAY" 
                       FontSize="18" 
                       FontWeight="Bold"/>

            <Border BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}"
                    BorderThickness="1"
                    Background="{ThemeResource SystemControlBackgroundAltHighBrush}">
                <lvc:CartesianChart
                    x:Name="WaveformChart"
                    Height="300"
                    Series="{x:Bind ViewModel.Series}"
                    XAxes="{x:Bind ViewModel.XAxes}"
                    YAxes="{x:Bind ViewModel.YAxes}"
                    TooltipPosition="Hidden">
                </lvc:CartesianChart>
            </Border>

            <StackPanel Orientation="Horizontal" Spacing="10">
                <Button x:Name="StartButton" Content="Start Monitoring" Click="StartMonitoring_Click"/>
                <Button x:Name="StopButton" Content="Stop Monitoring" Click="StopMonitoring_Click"/>
                <ComboBox x:Name="TimeScaleComboBox" 
                          Width="100"
                          SelectedIndex="0"
                          SelectionChanged="TimeScaleComboBox_SelectionChanged">
                    <ComboBoxItem Content="1s" Tag="1"/>
                    <ComboBoxItem Content="5s" Tag="5"/>
                    <ComboBoxItem Content="10s" Tag="10"/>
                </ComboBox>
                <Button x:Name="ClearButton" Content="Clear Chart" Click="ClearChart_Click"/>
                <Button x:Name="ResetZoomButton" Content="Reset Zoom" Click="ResetZoom_Click"/>
            </StackPanel>

            <TextBlock x:Name="StatusText" 
                       FontSize="12" 
                       Foreground="Gray"
                       Text="Monitoring stopped"/>
        </StackPanel>
    </Grid>
</Page>